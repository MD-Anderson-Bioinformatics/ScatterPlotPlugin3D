<!DOCTYPE html>
<html>
	<head>
		<title>threejs</title>
		<meta charset='utf-8'/>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
			h1, p, a { font-family: Helvetica; }
			#point-name {
				width: 100%;
				height: 12px;
				text-align: right;
			}
			#show-hover-point-coords{
				width: 100%;
				height: 12px;
				text-align: right;
			}
			#xyzdiv {
				padding-right: 20px;
				margin-right: 20px;
			}
		</style>
		<script src="js/three.min.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="demo_data/d3.v5.min.js"></script> <!-- only using d3 to load a local file and resolve promise when loaded -->
		<script type="module" src="scatterPlot3D.js"></script>
		<script type='module'>
			import {Plot3D} from './scatterPlot3D.js';
			document.addEventListener("DOMContentLoaded", function(event) {
				d3.tsv('demo_data/data.tsv').then(function(data) {
					const plotOptions = {
						pointSize: 0.1,
						xLabel: 'x-axis',
						yLabel: 'y-axis',
						zLabel: 'z-axis',
						plotTitle: 'Demonstration',
						legendTitle: 'i am legend',
						backgroundColor: 'ivory',
						axesDrawType: 'origin'
					}
					Plot3D.createPlot(data, plotOptions);
				function redraw() {
					let elem = document.getElementById('axesDrawType')
					plotOptions.axesDrawType = elem.options[elem.selectedIndex].value;
					elem = document.getElementById('x-axis-label')
					plotOptions.xLabel = elem.options[elem.selectedIndex].value;
					plotOptions.yLabel = 'Y'
					plotOptions.zLabel = 'Z'
					console.log({mar4: 'redraw clicked', plotOptions: plotOptions});
					Plot3D.createPlot(data, plotOptions);
				}
				window.redraw = redraw;
				})
			})
		</script>
	</head>
	<body>
		<div><p>Testing initial ideas with <a href='https://threejs.org' target='_blank'>threejs.</a></p></div>
		<div id="xyzdiv">
				<p id="point-name"></p>
				<p id='show-hover-point-coords'></p>
		</div>
		<div>
			<select name='axesDrawType' id='axesDrawType'>
				<option value='origin'>Origin Axes</option>
				<option value='box'>Box Axes</option>
			</select>
			<select name='x-axis-label' id='x-axis-label'>
				<option value='x-axis'>x-axis</option>
				<option value='X-AXIS'>X-AXIS</option>
				<option value='X'>X</option>
			</select>
			<button onclick="redraw()">Redraw</button>
		</div>
		<canvas id='main-plot'></canvas>
	</body>

</html>
